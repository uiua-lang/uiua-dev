# Index macros
F! ← ^0 5
G! ← F!^0
⍤⤙≍ ¯5 G!¯
Four! ← ∩∩^0
⍤⤙≍ [4 6 8 10] [Four!(×2) 2 3 4 5]
Dyad‼ ← ^0^1
⍤⤙≍ 12 Dyad‼(×2|+1) 5
F‼‼ ← ^1^0^2^2^3^0
⍤⤙≍ [1 0 2 2 3 0] F‼‼(⊂0|⊂1|⊂2|⊂3) []

F! ← (
  ^0
  ^0
)
⍤⤙≍ 6 F!+ 1 2 3
F! ← [
  ^0
  ^0]
⍤⤙≍ [6] F!+ 1 2 3
F! ← ⨬(
  ^0
| ^0
)
⍤⤙≍ ¯5 F!¯ 0 5

F! ← -^0 i
⍤⤙≍ i F!0

# Code macros
F! ←^
G! ←^ ⇌
H‼ ←^ ⊂⊢.
⍤⤙≍ [1 2] F!(⊂1|⊂2) []
⍤⤙≍ [2 1] G!(⊂1|⊂2) []
⍤⤙≍ [1 1 2] H‼(⊂1|⊂2) []
⍤⤙≍ [1 1 2] H‼(⊂1)(⊂2) []

X  ← 1
F! ←^ ⊂□°⋕X
⍤⤙≍ [1 2] [F!2]

F‼ ←^ $"_ ← _\n" °⊟
F‼Y5
⍤⤙≍ 5 Y

Foo! ←^ "t ←rand" ◌
Hi   ← Foo!+"a"
⍤⤙≍ "a" Hi

a ← 4
b ← (⚂)
c ← comptime(⚂)
e ← gen [] 1

A! ←^ $"_" a ◌
B! ←^ $"_" b ◌
C! ←^ $"_" c ◌
E! ←^ $"_" e ◌

◌A!1
◌B!2
◌C!3
◌E!5
◌E!5 # Ensure evaluated constant is set

F! ←^ {"+" "1"}◌
⍤⤙≍ [2 3 4] ≡F!∘ [1 2 3]

Struct‼ ←^ $"---_\n_\n---" ⊙(
  /$"_\n_"⊂□$"New ← {_}"≡⋅@⊙⟜⍚$"_ ← °□⊡_":°⊏⊜□⊸≠@ °$"[_]"
)°{⊙∘}

Struct‼Person[Name Age][] # Ensure that a word on the same line as binding generation works
◌◌Person~New "Dave" 15

F‼ ←^
⍤⤙≍ [1 2 3] [F‼(1|2|3)]

M! ←^ ⋅"∘"
@a @b
⍤⤙≍ "b" [⋅M!∘]
